(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48e24e98"],{"2b9a":function(t,e,i){"use strict";var a=i("3e10"),n=i.n(a);n.a},"3e10":function(t,e,i){},"895b":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-form",{attrs:{model:t.article,"label-position":"left","label-width":"50px"}},[i("el-form-item",{attrs:{label:"主题"}},[i("el-input",{attrs:{size:"small",placeholder:"主题...."},model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"分类"}},[i("el-select",{attrs:{size:"small",placeholder:"分类"},on:{change:t.getTagList},model:{value:t.article.category,callback:function(e){t.$set(t.article,"category",e)},expression:"article.category"}},[i("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.categoryList,function(t){return i("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})})],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"标签"}},[i("el-select",{attrs:{size:"small",multiple:"","collapse-tags":"",placeholder:"标签"},model:{value:t.article.tagList,callback:function(e){t.$set(t.article,"tagList",e)},expression:"article.tagList"}},[i("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.tagList,function(t){return i("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})})],2),t._v(" "),i("div",t._l(t.selectTag,function(e){return i("el-tag",{key:e._id,staticStyle:{"margin-left":"5px"},attrs:{closable:""},on:{close:function(i){return t.handleClose(e._id)}}},[t._v("\n          "+t._s(e.name)+"\n        ")])}),1)],1)],1),t._v(" "),i("mavon-editor",{ref:"md",attrs:{ishljs:!0,editable:!t.isView,"code-style":"code_style"},on:{imgAdd:t.$imgAdd,imgDel:t.$imgDel},model:{value:t.article.content,callback:function(e){t.$set(t.article,"content",e)},expression:"article.content"}}),t._v(" "),i("div",{staticClass:"view-button"},[i("el-tooltip",{attrs:{content:"取消",placement:"top"}},[i("el-button",{attrs:{type:"danger",icon:"el-icon-close",size:"small",circle:""},on:{click:t.cancelArticle}})],1),t._v(" "),i("el-tooltip",{attrs:{content:"保存",placement:"top"}},[i("el-button",{attrs:{type:"success",icon:"el-icon-check",size:"small",circle:""},on:{click:t.saveArticle}})],1)],1)],1)},n=[],r=(i("96cf"),i("3b8d")),c=(i("6762"),i("2fdb"),i("365c")),s=i("b2d8"),l=(i("64e1"),{name:"ArticleView",components:{mavonEditor:s["mavonEditor"]},props:{type:{type:String,default:"add"}},data:function(){return{isAdd:!1,isEdit:!1,isView:!1,img_file:{},tagList:[],categoryList:[],article:{title:"",category:"",tagList:[],content:""}}},computed:{selectTag:function(){var t=this;return this.tagList.filter(function(e){return t.article.tagList.includes(e._id)})}},created:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.checkType(),t.next=3,this.getCategoryList();case 3:if(t.t0=this.$route.params.aid,!t.t0){t.next=7;break}return t.next=7,this.getOne(this.$route.params.aid);case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:{checkType:function(){var t=this.type;"add"===t?this.isAdd=!0:"edit"===t?this.isEdit=!0:this.isView=!0},getOne:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["article"].getOne(e);case 2:if(i=t.sent,t.t0=i.data.category,!t.t0){t.next=7;break}return t.next=7,this.getTagList(i.data.category);case 7:this.article=Object.assign({},i.data);case 8:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getCategoryList:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["category"].getList();case 2:e=t.sent,this.categoryList=e?e.data:[];case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getTagList:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,c["tag"].getList(e);case 3:i=t.sent,this.tagList=i?i.data:[];case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),saveArticle:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if("add"!==this.type){t.next=7;break}return t.next=3,c["article"].create(this.article);case 3:e=t.sent,console.log(e),t.next=12;break;case 7:if("edit"!==this.type){t.next=12;break}return t.next=10,c["article"].update(this.article);case 10:i=t.sent,console.log(i);case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),cancelArticle:function(){this.$emit("changeView",{type:null})},handleClose:function(t){this.article.tagList.splice(this.article.tagList.indexOf(t),1)},$imgAdd:function(t,e){var i=this;console.log(this.$api);var a=new FormData;a.append("file",e),this.img_file[t]=e,c["upload"].img(a).then(function(e){var a=e.data.url;i.$refs.md.$img2Url(t,a)})},$imgDel:function(t){delete this.img_file[t]}}}),o=l,u=(i("2b9a"),i("2877")),d=Object(u["a"])(o,a,n,!1,null,"496c700c",null);e["default"]=d.exports}}]);