(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-640502be"],{"1c4c":function(t,e,r){"use strict";var n=r("9b43"),i=r("5ca1"),c=r("4bf8"),a=r("1fa8"),s=r("33a4"),o=r("9def"),l=r("f1ae"),u=r("27ee");i(i.S+i.F*!r("5cc5")(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,i,p,d=c(t),f="function"==typeof this?this:Array,m=arguments.length,h=m>1?arguments[1]:void 0,v=void 0!==h,w=0,g=u(d);if(v&&(h=n(h,m>2?arguments[2]:void 0,2)),void 0==g||f==Array&&s(g))for(e=o(d.length),r=new f(e);e>w;w++)l(r,w,v?h(d[w],w):d[w]);else for(p=g.call(d),r=new f;!(i=p.next()).done;w++)l(r,w,v?a(p,h,[i.value,w],!0):i.value);return r.length=w,r}})},"57b7":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-form",{directives:[{name:"show",rawName:"v-show",value:!t.createNew,expression:"!createNew"}],staticClass:"demo-form-inline",attrs:{inline:!0}},[r("el-form-item",{attrs:{label:"名称"}},[r("el-input",{attrs:{size:"small",placeholder:"名称...."},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),r("el-form-item",[r("el-tooltip",{attrs:{content:"查询",placement:"top"}},[r("el-button",{attrs:{icon:"el-icon-search",size:"small",circle:""},on:{click:function(e){return t.getScriptList()}}})],1)],1),t._v(" "),r("el-form-item",{staticStyle:{position:"absolute",right:"10px"}},[r("el-tooltip",{attrs:{content:"添加",placement:"top"}},[r("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"small",circle:""},on:{click:function(e){t.createNew=!0}}})],1)],1)],1),t._v(" "),r("transition",{attrs:{name:"el-zoom-in-top"}},[r("el-form",{directives:[{name:"show",rawName:"v-show",value:t.createNew,expression:"createNew"}],ref:"setNew",attrs:{"label-width":"80px",model:t.newScript,size:"mini"}},[r("el-form-item",{attrs:{label:"脚本名称"}},[r("el-input",{attrs:{placeholder:"脚本名称必须和文件名相同"},model:{value:t.newScript.name,callback:function(e){t.$set(t.newScript,"name","string"===typeof e?e.trim():e)},expression:"newScript.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"描述说明"}},[r("el-input",{attrs:{placeholder:"脚本类型与作用"},model:{value:t.newScript.remark,callback:function(e){t.$set(t.newScript,"remark","string"===typeof e?e.trim():e)},expression:"newScript.remark"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"参数"}},[r("el-input",{attrs:{placeholder:"请使用#划分参数，执行脚本时将传入参数数组"},model:{value:t.newScript.argument,callback:function(e){t.$set(t.newScript,"argument",e)},expression:"newScript.argument"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"danger",icon:"el-icon-close",size:"small",circle:""},on:{click:t.handlerReset}}),t._v(" "),r("el-button",{attrs:{type:"success",icon:"el-icon-check",size:"small",circle:""},on:{click:t.handlerCreate}})],1)],1)],1),t._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.scriptList,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{label:"脚本名称","show-overflow-tooltip":"",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.currentEdit&&t.currentEdit._id===e.row._id?r("el-input",{model:{value:t.currentEdit.name,callback:function(e){t.$set(t.currentEdit,"name",e)},expression:"currentEdit.name"}}):r("p",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"说明","show-overflow-tooltip":"",width:"600"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.currentEdit&&t.currentEdit._id===e.row._id?r("el-input",{model:{value:t.currentEdit.remark,callback:function(e){t.$set(t.currentEdit,"remark",e)},expression:"currentEdit.remark"}}):r("p",[t._v(t._s(e.row.remark))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"参数说明","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t.currentEdit&&t.currentEdit._id===e.row._id?r("el-input",{model:{value:t.currentEdit.argument,callback:function(e){t.$set(t.currentEdit,"argument",e)},expression:"currentEdit.argument"}}):r("p",[t._v(t._s(e.row.argument))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"脚本状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-switch",{attrs:{value:!e.row.disabled,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(r){return t.handlerStatus(e.row)}}})]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t.$moment(e.row.meta.createdAt).format("YYYY-MM-DD HH:mm:ss")))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.currentEdit&&t.currentEdit._id===e.row._id?r("div",[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"保存",placement:"top"}},[r("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-check",circle:""},on:{click:function(r){return t.handlerEdit(e.row._id)}}})],1),t._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"取消",placement:"top"}},[r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-close",circle:""},on:{click:function(e){t.currentEdit=null}}})],1)],1):r("div",[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"运行",placement:"top"}},[r("el-button",{attrs:{type:"warning",size:"mini",disabled:e.row.disabled,icon:"el-icon-video-play",circle:""},on:{click:function(r){return t.handleArgs(e.row)}}})],1),t._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top"}},[r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit",circle:""},on:{click:function(r){return t.setEdit(e.row)}}})],1),t._v(" "),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(r){return t.handleDelete(e.row._id)}}})],1)],1)]}}])})],1),t._v(" "),r("el-dialog",{attrs:{title:"运行脚本",visible:t.dialogScript,"close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(e){t.dialogScript=e}}},[r("p",[t._v(t._s(t.currentSript?t.currentSript.remark:""))]),t._v(" "),r("el-form",{attrs:{"label-position":"top","label-width":"10%"}},t._l(t.scriptArgs,function(e,n){return r("el-form-item",{key:e+n,attrs:{label:t.argsKey[n]}},[r("el-input",{model:{value:t.scriptArgs[n],callback:function(e){t.$set(t.scriptArgs,n,"string"===typeof e?e.trim():e)},expression:"scriptArgs[i]"}})],1)}),1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.handleCancel}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.handleRunScript}},[t._v("运 行")])],1)],1)],1)},i=[],c=(r("7f7f"),r("5df3"),r("1c4c"),r("28a5"),r("a8db")),a=(r("96cf"),r("3b8d")),s=r("365c"),o={name:"ScriptList",data:function(){return{search:"",loading:!1,createNew:!1,currentSript:null,currentEdit:null,newScript:{name:"",remark:"",argument:""},scriptList:[],argsKey:[""],scriptArgs:[""],dialogScript:!1}},created:function(){this.getScriptList()},methods:{handlerReset:function(){this.createNew=!1,this.$refs.setNew.resetFields()},handlerCreate:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["script"].create(this.newScript);case 2:e=t.sent,200===e.code&&this.$message.success("添加成功"),this.handlerReset(),this.getScriptList();case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getScriptList:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,s["script"].getList();case 3:e=t.sent,this.scriptList=e.data,this.loading=!1;case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),handlerEdit:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){var r,n,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=this.currentEdit,r.meta,n=Object(c["a"])(r,["meta"]),t.next=3,s["script"].update(n);case 3:t.sent,this.scriptList=this.scriptList.map(function(t){return t._id===e?Object.assign({},i.currentEdit):t}),this.currentEdit=null;case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),handlerStatus:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["script"].status([e._id],!e.disabled);case 2:r=t.sent,200===r.code&&this.getScriptList();case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),handleDelete:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){var r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$confirm("此操作将删除该记录但会保留当前脚本, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(a["a"])(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["script"].delete([e]);case 2:n=t.sent,200===n.code&&r.getScriptList();case 4:case"end":return t.stop()}},t)}))).catch(function(){return console.log("取消删除")});case 1:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),handleArgs:function(t){this.currentSript=t,this.dialogScript=!0,this.argsKey=t.argument.split("#"),this.scriptArgs=Array.from({length:this.argsKey.length},function(t,e){return""})},handleCancel:function(){this.dialogScript=!1,this.argsKey=[""],this.scriptArgs=[""],this.currentSript=null},handleRunScript:function(){var t=this.scriptArgs.filter(function(t){return""!==t});this.$socket.emit("runScript",{name:this.currentSript.name,args:t}),this.handleCancel()},setEdit:function(t){this.currentEdit=t}}},l=o,u=r("2877"),p=Object(u["a"])(l,n,i,!1,null,null,null);e["default"]=p.exports},"5df3":function(t,e,r){"use strict";var n=r("02f4")(!0);r("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})})},a8db:function(t,e,r){"use strict";var n=r("e265"),i=r.n(n),c=r("a4bb"),a=r.n(c);function s(t,e){if(null==t)return{};var r,n,i={},c=a()(t);for(n=0;n<c.length;n++)r=c[n],e.indexOf(r)>=0||(i[r]=t[r]);return i}function o(t,e){if(null==t)return{};var r,n,c=s(t,e);if(i.a){var a=i()(t);for(n=0;n<a.length;n++)r=a[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(c[r]=t[r])}return c}r.d(e,"a",function(){return o})},f1ae:function(t,e,r){"use strict";var n=r("86cc"),i=r("4630");t.exports=function(t,e,r){e in t?n.f(t,e,i(0,r)):t[e]=r}}}]);